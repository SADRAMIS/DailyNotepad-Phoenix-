<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>–ë–ª–æ–∫–Ω–æ—Ç-–§–µ–Ω–∏–∫—Å</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .notebook-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #dee2e6;
        }
         .date-section {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .weight-section {
            font-size: 1.2rem;
            color: #6c757d;
        }
        .navigation-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .notes-list {
            margin-bottom: 3rem;
        }
        .note-item {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            background-color: #f8f9fa;
        }
        .note-completed {
            text-decoration: line-through;
            opacity: 0.7;
        }
        .empty-notes {
            text-align: center;
            color: #6c757d;
            font-style: italic;
            padding: 2rem;
        }
    </style>
</head>
<body>
<div class="container mt-4">
    <!-- –®–∞–ø–∫–∞ –±–ª–æ–∫–Ω–æ—Ç–∞ —Å –¥–∞—Ç–æ–π –∏ –≤–µ—Å–æ–º -->
    <div class="notebook-header">
        <div class="date-section">
            üìÖ <span th:text="${#temporals.format(date, 'dd.MM.yyyy')}">01.01.2024</span>
        </div>
        <div class="weight-section">
            ‚öñÔ∏è <span th:text="${weight} + ' –∫–≥'">75.0 –∫–≥</span>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –¥–Ω—è–º–∏ -->
    <div class="navigation-buttons">
        <a th:href="@{/(date=${#temporals.format(#temporals.createYesterday(date), 'yyyy-MM-dd')})}"
           class="btn btn-outline-primary">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å</a>
        <a th:href="@{/(date=${#temporals.format(#temporals.createToday(), 'yyyy-MM-dd')})}"
           class="btn btn-outline-secondary">–°–µ–≥–æ–¥–Ω—è</a>
        <a th:href="@{/(date=${#temporals.format(#temporals.createTomorrow(date), 'yyyy-MM-dd')})}"
           class="btn btn-outline-primary">–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å ‚Üí</a>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–º–µ—Ç–æ–∫ -->
    <div class="notes-list">
        <h3>–ó–∞–º–µ—Ç–∫–∏ –Ω–∞ –¥–µ–Ω—å:</h3>

        <div th:if="${todayNotes.empty}" class="empty-notes">
            –ù–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å –∑–∞–º–µ—Ç–æ–∫ –Ω–µ—Ç
        </div>

        <div th:each="note : ${todayNotes}" class="note-item"
             th:classappend="${note.completed} ? 'note-completed' : ''">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h5 th:text="${note.title}">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏</h5>
                    <p th:text="${note.content}" class="mb-1">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏</p>
                    <small class="text-muted">
                        –í–µ—Å: <span th:text="${note.weight} ?: '–Ω–µ —É–∫–∞–∑–∞–Ω'">75.0</span> –∫–≥
                    </small>
                </div>
                <div class="btn-group">
                    <form th:action="@{/notes/{id}/toggle(id=${note.id})}" method="post" style="display: inline;">
                        <button type="submit" class="btn btn-sm"
                                th:classappend="${note.completed} ? 'btn-warning' : 'btn-success'">
                            <span th:text="${note.completed} ? '–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ' : '–í—ã–ø–æ–ª–Ω–µ–Ω–æ'">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                        </button>
                    </form>
                    <form th:action="@{/notes/{id}/delete(id=${note.id})}" method="post" style="display: inline;"
                          onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–º–µ—Ç–∫—É?');">
                        <button type="submit" class="btn btn-sm btn-danger">‚úï</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏ -->
    <div class="note-form">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É:</h3>

        <form th:action="@{/notes}" th:object="${note}" method="post">
            <div class="mb-3">
                <label for="title" class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
                <input type="text" class="form-control" id="title" th:field="*{title}"
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏" required>
            </div>

            <div class="mb-3">
                <label for="content" class="form-label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:</label>
                <textarea class="form-control" id="content" th:field="*{content}"
                          rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏" required></textarea>
            </div>

            <div class="mb-3">
                <label for="weight" class="form-label">–í–µ—Å (–∫–≥):</label>
                <input type="number" step="0.1" class="form-control" id="weight"
                       th:field="*{weight}" placeholder="75.0">
                <div class="form-text">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
            </div>

            <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –¥–∞—Ç—ã -->
            <input type="hidden" th:field="*{date}" th:value="${#temporals.format(date, 'yyyy-MM-dd')}">

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</button>
                <button type="reset" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>